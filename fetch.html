<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="divBox"></div>
    <button>change</button>

    <script>
        var divBox = document.querySelector("#divBox")
        let addHtml = "";

        // fetch를 사용한 ajax 함수
        function ajax (html){
            fetch(html).then(function(response){
                response.text().then(function(text){
                    divBox.innerHTML = text;
                })
            })
        }

        // click button
        document.querySelector("button").addEventListener("click", function(){
            ajax("clickButton")
        })


        // json 갯수만큼 태그 생성
        fetch('info.json')
            .then(res => {
                // response 처리
                console.log(res);
                // 응답을 json 형태로 파싱
                return res.json();
            })
            .then(data => {
                // json 출력
                console.log(data.length)
                data.forEach((item)=>{
                    addHtml += `
                        <div>
                            <p>id : <span>${item.id}</span></p>
                            <p>name : <span>${item.name}</span></p>
                            <p>age : <span>${item.age}</span></p>
                        </div>
                    `;
                });
                divBox.innerHTML = addHtml;
            })
            .catch(err => {
                // error 처리
                console.log('Fetch Error', err);
            });
    </script>
</body>
</html>
